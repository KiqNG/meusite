<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lojinha Novo SJC - Carrinho</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            background-color: #f4f4f4;
        }
        .container {
            padding: 20px;
            max-width: 800px;
            margin: 40px auto;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .header {
            background-color: #333;
            color: #fff;
            padding: 15px;
            border-radius: 10px 10px 0 0;
        }
        .steps {
            display: flex;
            justify-content: space-around;
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .steps li {
            padding: 10px;
            color: #fff;
        }
        .steps li.active {
            font-weight: bold;
            color: #f77f00;
        }
        .cart-item {
            display: flex;
            flex-direction: column;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        .cart-item:last-child {
            border-bottom: none;
        }
        .cart-item .details {
            margin-bottom: 10px;
        }
        .cart-item .details label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .cart-item .details select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .cart-item .details .color-options {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 4px;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .color-option.laranja {
            background-color: #f77f00;
        }
        .color-option.azul-marinho {
            background-color: #003566;
        }
        .cart-item .actions {
            text-align: center;
            margin-top: 10px;
        }
        .cart-item .actions button {
            padding: 10px 20px;
            background-color: #f77f00;
            color: #fff;
            border: none;
            cursor: pointer;
            border-radius: 4px;
            font-size: 16px;
            display: block;
            margin: 0 auto;
        }
        .cart-item .actions button:hover {
            background-color: #cc6600;
        }
        .cart-summary {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin-top: 20px;
        }
        .cart-summary .remove-all-button,
        .cart-summary .proceed-button {
            flex: 1;
            padding: 12px;
            border: none;
            color: #fff;
            border-radius: 4px;
            font-size: 16px;
            text-align: center;
            cursor: pointer;
        }
        .cart-summary .remove-all-button {
            background-color: #003566;
        }
        .cart-summary .remove-all-button:hover {
            background-color: #002a4e;
        }
        .cart-summary .proceed-button {
            background-color: #003566;
        }
        .cart-summary .proceed-button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .cart-summary .proceed-button:hover {
            background-color: #002a4e;
        }
        .cart-list {
            margin-top: 20px;
        }
        .cart-list .cart-item {
            border: none;
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #ddd;
            border-radius: 4px;
            background-color: #f4f4f4;
        }
        .cart-list .cart-item:last-child {
            border-bottom: none;
        }
        .cart-list .cart-item .details {
            margin: 0;
            text-align: left;
            flex: 1;
        }
        .cart-list .cart-item .actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .remove-button {
            background-color: #003566;
            color: #fff;
            border: none;
            cursor: pointer;
            border-radius: 4px;
            padding: 5px 10px;
            font-size: 14px;
        }
        .remove-button:hover {
            background-color: #002a4e;
        }
        .product-image {
            width: 100%;
            max-width: 400px;
            height: auto;
            margin: 20px auto;
            display: block;
        }
        .total-price-container {
            display: flex;
            flex-direction: column;
            padding: 20px;
            color: #333;
            border-radius: 4px;
            font-size: 1em;
            margin-top: 20px;
            background-color: #fff;
            border: 1px solid #ddd;
        }
        .total-price-container .subtotal,
        .total-price-container .frete,
        .total-price-container .total {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <ul class="steps">
                <li class="active">1 Carrinho</li>
                <li>2 Identificação</li>
                <li>3 Pagamento</li>
            </ul>
        </div>
        <img id="product-image" class="product-image" src="camisetalaranja.png" alt="Camiseta Laranja">
        <div class="cart-item">
            <div class="details">
                <label for="color">Cor:</label>
                <div class="color-options">
                    <div class="color-option laranja" onclick="selectColor('laranja')"></div>
                    <div class="color-option azul-marinho" onclick="selectColor('azul-marinho')"></div>
                </div>
                <label for="size">Tamanho:</label>
                <select id="size">
                    <option value="P">P</option>
                    <option value="M">M</option>
                    <option value="G">G</option>
                    <option value="GG">GG</option>
                </select>
                <label for="quantity">Quantidade:</label>
                <select id="quantity">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select>
            </div>
            <div class="actions">
                <button id="add-to-cart-button">Adicionar ao Carrinho</button>
            </div>
        </div>
        <div class="cart-list" id="cart-list">
            <!-- Itens do carrinho serão exibidos aqui -->
        </div>
        <div class="cart-summary">
            <button class="remove-all-button" id="remove-all-button" onclick="removeAll()">Remover Todos</button>
            <button class="proceed-button" id="proceed-button" disabled onclick="proceedToNextStep()">Prosseguir</button>
        </div>
        <div class="total-price-container">
            <div class="subtotal">Subtotal: R$<span id="subtotal-price">0,00</span></div>
            <div class="frete">Frete: R$10,00</div>
            <div class="total">Total: R$<span id="total-price">10,00</span></div>
        </div>
    </div>
    <script>
        const itemPrice = 35;
        const frete = 10;
        let selectedColor = localStorage.getItem('selectedColor') || 'laranja';

        function selectColor(color) {
            selectedColor = color;
            localStorage.setItem('selectedColor', color);
            const imagePath = color === 'laranja' ? 'camisetalaranja.png' : 'camisetaazul.png';
            document.getElementById('product-image').src = imagePath;

            // Estiliza a cor selecionada
            document.querySelectorAll('.color-option').forEach(option => {
                option.style.border = '2px solid transparent';
            });
            document.querySelector(`.color-option.${color}`).style.border = '2px solid #333';
        }

        function addToCart() {
            const size = document.getElementById('size').value;
            const quantity = parseInt(document.getElementById('quantity').value);
            const cartList = document.getElementById('cart-list');

            // Cria um novo item no carrinho
            const cartItem = document.createElement('div');
            cartItem.classList.add('cart-item');

            cartItem.innerHTML = `
                <div class="details">
                    Cor: ${selectedColor}, Tamanho: ${size}, Quantidade: ${quantity}
                </div>
                <div class="actions">
                    <button class="remove-button" onclick="removeCartItem(this, ${quantity})">Remover</button>
                </div>
            `;

            cartList.appendChild(cartItem);

            // Salva o item no localStorage
            saveCartItems();

            updateTotalPrice();

            // Habilita o botão de prosseguir
            document.getElementById('proceed-button').disabled = false;

            // Limpa o formulário
            document.getElementById('size').value = 'P';
            document.getElementById('quantity').value = 1;
        }

        function removeCartItem(button, quantity) {
            const cartItem = button.parentElement.parentElement;
            cartItem.remove();
            
            // Salva o item no localStorage
            saveCartItems();

            updateTotalPrice();

            // Desabilita o botão de prosseguir se não houver mais itens no carrinho
            const cartList = document.getElementById('cart-list');
            if (cartList.children.length === 0) {
                document.getElementById('proceed-button').disabled = true;
            }
        }

        function removeAll() {
            const cartList = document.getElementById('cart-list');
            cartList.innerHTML = '';
            updateTotalPrice();
            document.getElementById('proceed-button').disabled = true;

            // Salva o item no localStorage
            saveCartItems();
        }

        function updateTotalPrice() {
            const cartItems = document.querySelectorAll('.cart-list .cart-item');
            let subtotalPrice = 0;
            cartItems.forEach(item => {
                const details = item.querySelector('.details').textContent;
                const quantity = parseInt(details.split('Quantidade: ')[1]);
                subtotalPrice += itemPrice * quantity;
            });

            const totalPrice = subtotalPrice + frete;
            document.getElementById('subtotal-price').textContent = subtotalPrice.toFixed(2);
            document.getElementById('total-price').textContent = totalPrice.toFixed(2);

            // Salva o total no localStorage
            localStorage.setItem('totalPrice', totalPrice.toFixed(2));
        }

        function saveCartItems() {
            const cartItems = document.querySelectorAll('.cart-list .cart-item');
            const items = [];
            cartItems.forEach(item => {
                const details = item.querySelector('.details').textContent;
                items.push(details);
            });

            localStorage.setItem('cartItems', JSON.stringify(items));
        }

        function loadCartItems() {
            const savedItems = JSON.parse(localStorage.getItem('cartItems'));
            if (savedItems) {
                const cartList = document.getElementById('cart-list');
                savedItems.forEach(details => {
                    const cartItem = document.createElement('div');
                    cartItem.classList.add('cart-item');
                    cartItem.innerHTML = `
                        <div class="details">${details}</div>
                        <div class="actions">
                            <button class="remove-button" onclick="removeCartItem(this)">Remover</button>
                        </div>
                    `;
                    cartList.appendChild(cartItem);
                });

                updateTotalPrice();
                document.getElementById('proceed-button').disabled = savedItems.length === 0;
            }

            // Carrega a cor selecionada
            selectColor(selectedColor);
        }

        function proceedToNextStep() {
            window.location.href = 'identificacao.html';
        }

        // Carrega os itens do carrinho ao carregar a página
        window.onload = loadCartItems;

        // Define a cor padrão ao carregar a página
        selectColor(selectedColor);

        // Adiciona o evento ao botão "Adicionar ao Carrinho"
        document.getElementById('add-to-cart-button').addEventListener('click', addToCart);
    </script>
</body>
</html>
